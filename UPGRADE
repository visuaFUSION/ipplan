IPplan Upgrade Instructions
============================

For detailed upgrade instructions, see:
  Help -> System Administration -> Upgrading

Or read docs/admin/upgrading.md directly.


IMPORTANT: Do Not Reuse Your Old config.php
-------------------------------------------

Your old config.php file will NOT work with this version. The new version
includes required configuration options that do not exist in older versions.

You must:
1. Backup your old config.php
2. Note your database credentials (DBF_HOST, DBF_USER, DBF_PASSWORD, DBF_NAME)
3. Note your admin credentials (ADMINUSER, ADMINPASSWD)
4. Replace ALL files with the new version (do not keep your old config.php)
5. Edit the NEW config.php and enter your database/admin credentials
6. Set DBF_TYPE to 'mysqli' (required for PHP 7+)


Quick Upgrade Summary
---------------------

1. BACKUP everything:
   - Your database: mysqldump -u root -p ipplan > ipplan_backup.sql
   - Your installation directory: cp -r /var/www/html/ipplan /var/www/html/ipplan.backup

2. RECORD your settings from the old config.php:
   - DBF_HOST, DBF_USER, DBF_PASSWORD, DBF_NAME
   - ADMINUSER, ADMINPASSWD
   - Any other customizations

3. REMOVE old files:
   - rm -rf /var/www/html/ipplan/*

4. EXTRACT new version:
   - tar -xzf ipplan-2026.x.x.x.tar.gz -C /var/www/html/ipplan/

5. CONFIGURE the NEW config.php:
   - Enter your database credentials
   - Enter your admin credentials
   - Ensure DBF_TYPE is set to 'mysqli'

6. SET permissions:
   - chown -R www-data:www-data /var/www/html/ipplan
   - chmod -R 755 /var/www/html/ipplan

7. TEST:
   - Log in and verify your data is accessible


Common Errors
-------------

"Your config.php file is inconsistent"
  -> You are using an old config.php. Use the new one and transfer your credentials.

"Missing file: drivers/adodb-mysql.inc.php"
  -> Change DBF_TYPE from 'mysql' to 'mysqli' in config.php


Legacy Notes (Historical Reference)
-----------------------------------

The notes below are from previous versions and kept for historical reference.
For current upgrade instructions, see docs/admin/upgrading.md

Apr 27, 2007
-  ipplan:	if you intend upgrading MySQL to 5.1, ensure that you upgrade
		IPplan to the latest version first. If you did not upgrade
		IPplan first, you will get database errors and you will be
		required to manually rename the schema table by executing the
		following SQL:

			RENAME TABLE `range` TO `netrange`;

Jul 3, 2006
		display templates now reside in /ipplan/templates/display - ensure you
			move custom template .xml files from /ipplan/user to the new location
			and ensure that the permissions are correct otherwise your
			fields will be "unknown"

Nov 11, 2004
-  ipplan:	if you intend upgrading MySQL to 5, ensure that you upgrade
		IPplan to the latest version first. If you did not upgrade
		IPplan first, you will get database errors and you will be
		required to manually rename the schema table by executing the
		following SQL:

			RENAME TABLE `schema` TO `version`;

Jan 09, 2004
-  ipplan:	when upgrading postgress make sure you read the onscreen
		instructions - postgress is broken and things needs to
		be done fairly manually

Nov 12, 2004
-  ipplan:	when upgrading make sure to backup your database. Also
		make sure you make a backup of the config file for
		reference and also make backups of your templates
